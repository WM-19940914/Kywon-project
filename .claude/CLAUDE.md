# 에어컨 설치 발주 관리 시스템 (멜레아)

## 프로젝트 개요
- **목적**: 교원그룹 전국 에어컨 발주 접수 → 장비 배송 → 설치 → 견적 → 정산까지 원스톱 관리
- **현재 문제**: 엑셀 + 전화 + 카톡으로 흩어진 업무를 수작업으로 처리하는 비효율
- **해결 방안**: 각 역할(교원/멜레아/에스원)이 한 곳에서 입력하면 나머지가 자동 연결되는 웹앱
- **사용자**: 개발 완전 초보자 — 코드 설명은 한글로 친절하게

---

## 사용자 역할별 업무

| 사용자 | 주요 업무 |
|--------|----------|
| **교원그룹** | 발주 접수, AS 요청 |
| **멜레아 (본인)** | 견적서 작성, 삼성 장비 발주, 배송 추적, 재고/보관장비 관리, 월별 정산 |
| **에스원ENG (설치팀)** | 설치일정 입력, 설치비 입력 |
| **경영팀** | 정산 자료 확인/승인 |

---

## 핵심 업무 흐름

```
교원그룹 발주 접수 (orders)
  │
  ├─ 신규설치 → 삼성에 장비 발주 → 배송관리(발주대기→배송중→입고완료)
  │                                    └─ 입고 시 창고 재고에 자동 반영
  ├─ 철거보관 → 보관장비 관리 (어느 창고에 보관중인지 추적)
  │
  ├─ 견적서 작성 (판매가) + 장비비/설치비 입력 (원가) → 마진 자동 계산
  │
  ├─ 에스원 설치일정 입력 + 설치비 엑셀 대신 직접 입력
  │
  └─ 설치 완료 → 월별 정산지 자동 생성 (경영팀 자료 제출)
```

---

## 기술 스택

### Frontend
- **Next.js 14** (App Router 방식)
- **TypeScript**
- **Tailwind CSS**
- **shadcn/ui** (UI 컴포넌트 라이브러리)

### Backend & Database (추후 연동)
- **Supabase** (PostgreSQL 기반)
  - Database: 관계형 데이터 저장
  - Authentication: 역할별 로그인
  - Storage: 견적서 PDF 업로드
  - Real-time: 실시간 업데이트

### 배포
- **Vercel** (프론트엔드 호스팅)

---

## 현재 구현 상태 (2026-01-30 기준)

### 구현 완료
- [x] **발주 관리** (`/orders`) — 칸반보드 + 발주 등록/수정/상세
- [x] **배송 관리** (`/mellea/delivery`) — 테이블 리스트 + 아코디언 구성품 상세
  - 상태 탭: 발주대기(기본) / 배송중 / 입고완료
  - 구성품별 개별 주문번호 관리
  - 매입처 뱃지 표시 (기본: 삼성전자)
  - 모델명: 구성품명 + 부품모델명 (SET모델은 미표시)
- [x] **재고 관리** (`/mellea/warehouses`) — 창고별 재고 현황
- [x] **연간 단가표** (`/price-table`) — SET 모델 + 구성품 조회
- [x] **견적서 작성** — 장비/설치비 입력 + 단가표 연동 + 단위절사/VAT 자동 계산
- [x] **정산 관리** (`/settlements`) — 기본 구조
- [x] **사이드바 메뉴** — 역할 그룹별 메뉴 배치 (교원/멜레아/에스원/공통)

### 미구현 (추후 작업)
- [ ] **AS 관리** (`/as`) — 메뉴만 배치 (준비중)
- [ ] **설치비 관리** (`/mellea/install-cost`) — 메뉴만 배치 (준비중)
- [ ] **배송정보 입력/수정 모달** 개선 — 구성품별 개별 주문번호 체계에 맞게 수정
- [ ] **Supabase DB 연동** — 현재 mock-data 사용 중, 관계형 테이블 설계 필요
- [ ] **카카오 알림톡** — 발주접수/배송완료/일정확인 등 알림 (카카오 비즈니스 채널)
- [ ] **역할별 권한 제어** — 멜레아/에스원/교원 각자 화면만 접근
- [ ] **카카오 지도 API** — 창고 위치 지도 표시 (현재 SVG)
- [ ] **월별 정산 자동화** — 견적+배송+설치비 데이터 합산 → 정산지 자동 생성

---

## 데이터 구조 (Supabase 설계 예정)

### 핵심 테이블 관계
```
orders (발주) ─┬─ order_items (발주 내역, 1:N)
               ├─ equipment_items (구성품/배송 정보, 1:N)
               ├─ installation_costs (설치비, 1:N)
               └─ customer_quotes → quote_items (견적서, 1:1:N)

warehouses (창고 목록)
warehouse_inventory (창고별 재고 — 입고/출고 기록)
stored_equipment (철거보관 장비 — 어느 창고, 언제부터)
settlements (월별 정산)
```

### 주요 타입 (types/order.ts)
- `Order` — 발주 정보 (중심 테이블)
- `OrderItem` — 발주 내역 (작업종류/품목/모델/수량)
- `EquipmentItem` — 구성품별 배송 정보 (주문번호/배송상태/창고/매입처 개별 관리)
- `InstallationCost` — 설치비 항목
- `CustomerQuote` — 소비자용 견적서 (원가 미포함)
- `DeliveryStatus` — 배송상태 (pending/in-transit/delivered)
- `OrderStatus` — 진행상태 (received/in-progress/completed/settled)

---

## 코딩 규칙

### 1. 주석 작성 (매우 중요!)
- **모든 컴포넌트**: 상단에 용도 설명 주석
- **함수**: 파라미터와 리턴값 설명
- **복잡한 로직**: 단계별 설명 주석

### 2. 컴포넌트 작성
- **클라이언트 컴포넌트**: 'use client' 명시
- **파일명**: kebab-case (order-list.tsx)
- **컴포넌트명**: PascalCase (OrderList)

### 3. 개발 원칙
- **초보 개발자 친화적**: 코드에 자세한 한글 주석
- **단계별 구현**: 한 번에 하나씩 기능 추가
- **날짜 처리**: 한국 시간대(KST) 사용
